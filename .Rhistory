# load the necessary packages and data set "Teams"
#install.packages("Lahman")
library(dplyr)
library(ggplot2)
library(Lahman)
#
# load the Lahman data table "Teams"
data(Teams)
#
#
# CREATE LEAGUE SUMMARY TABLES
# ============================
#
# select a sub-set of teams from 1901 [the establishment of the American League] forward to 2012
Teams_sub <- as.data.frame(subset (Teams, yearID > 1900 & lgID != "FL"))
#
# calculate each team's average runs and runs allowed per game
Teams_sub$RPG <- Teams_sub$R / Teams_sub$G
Teams_sub$RAPG <- Teams_sub$RA / Teams_sub$G
#
# create new data frame with season totals for each league
LG_RPG <- aggregate(cbind(R, RA, G) ~ yearID + lgID, data = Teams_sub, sum)
# calculate league + season runs and runs allowed per game
LG_RPG$LG_RPG <- LG_RPG$R / LG_RPG$G
LG_RPG$LG_RAPG <- LG_RPG$RA / LG_RPG$G
head(LG_RPG)
#
# dplyr approach to creating LG_RPG
LG_RPG <- Teams %>%
filter(yearID > 1900, lgID != "FL") %>%
group_by(yearID, lgID) %>%
summarise(R=sum(R), RA=sum(RA), G=sum(G)) %>%
mutate(RPG=R/G, RAPG=RA/G)
head(LG_RPG)
MLB_RPG <- Teams %>%
filter(yearID > 1900, lgID != "FL") %>%
group_by(yearID) %>%
summarise(R=sum(R), RA=sum(RA), G=sum(G)) %>%
mutate(RPG=R/G, RAPG=RA/G)
head(MLB_RPG)
shiny::runApp('//Scout/mhmonkma$/profile/Desktop/GitHub/MLBrunscoring_shiny')
shiny::runApp('//Scout/mhmonkma$/profile/Desktop/GitHub/MLBrunscoring_shiny')
